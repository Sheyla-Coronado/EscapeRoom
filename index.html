<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
Â  <title>Escapeâ€¦ if you can!</title>
Â  <style>

Â  Â  .digit {
Â  Â  Â  padding: 15px;
Â  Â  Â  font-size: 1.2rem;
Â  Â  Â  border-radius: 5px;
Â  Â  Â  cursor: pointer;
Â  Â  Â  border: 1px solid #555;
Â  Â  }
Â  Â  .digit-found {
Â  Â  Â  background: var(--accent);
Â  Â  Â  color: black;
Â  Â  Â  font-weight: bold;
Â  Â  }
Â  Â  .digit-disabled {
Â  Â  Â  background: #333;
Â  Â  Â  color: #666;
Â  Â  Â  cursor: not-allowed;
Â  Â  Â  opacity: 0.5;
Â  Â  }

Â  Â Â 
Â  Â  /* ========== VARIABLES ========== */
Â  Â  :root {
Â  Â  Â  --bg: #1e1e2f;
Â  Â  Â  --panel: #2a2a40;
Â  Â  Â  --accent: #c9a227;
Â  Â  Â  --text: #f5f5f5;
Â  Â  }

Â  Â  /* ========== BASE STYLES ========== */
Â  Â  * {
Â  Â  Â  box-sizing: border-box;
Â  Â  Â  font-family: system-ui, sans-serif;
Â  Â  }

Â  Â  body {
Â  Â  Â  margin: 0;
Â  Â  Â  background: var(--bg);
Â  Â  Â  color: var(--text);
Â  Â  }

Â  Â  .app {
Â  Â  Â  max-width: 1100px;
Â  Â  Â  margin: auto;
Â  Â  Â  padding: 16px;
Â  Â  }

Â  Â  h1, h2, h3 {
Â  Â  Â  margin-bottom: 12px;
Â  Â  }

Â  Â  /* ========== SCREEN NAVIGATION ========== */
Â  Â  .screen {
Â  Â  Â  display: none;
Â  Â  }

Â  Â  .screen.active {
Â  Â  Â  display: block;
Â  Â  }

Â  Â  /* ========== BUTTONS ========== */
Â  Â  button {
Â  Â  Â  width: 100%;
Â  Â  Â  padding: 14px;
Â  Â  Â  margin: 8px 0;
Â  Â  Â  border: none;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  background: var(--accent);
Â  Â  Â  color: #000;
Â  Â  Â  font-size: 1rem;
Â  Â  Â  cursor: pointer;
Â  Â  Â  font-weight: 600;
Â  Â  }

Â  Â  button.secondary {
Â  Â  Â  background: #444;
Â  Â  Â  color: #fff;
Â  Â  }

Â  Â  /* ========== FORM INPUTS ========== */
Â  Â  select, input {
Â  Â  Â  padding: 6px;
Â  Â  Â  border-radius: 6px;
Â  Â  Â  border: none;
Â  Â  }

Â  Â  /* ========== CARD GRID ========== */
Â  Â  .grid {
Â  Â  Â  display: grid;
Â  Â  Â  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
Â  Â  Â  gap: 12px;
Â  Â  }

Â  Â  .card {
Â  Â  Â  background: var(--panel);
Â  Â  Â  border-radius: 10px;
Â  Â  Â  padding: 12px;
Â  Â  }

Â  Â  /* ========== ROOMS SCREEN ========== */
Â  Â  .rooms-topbar {
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  gap: 6px;
Â  Â  }

Â  Â  .rooms-header {
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  justify-content: center;
Â  Â  Â  position: relative;
Â  Â  }

Â  Â  .rooms-search {
Â  Â  Â  position: relative;
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  gap: 8px;
Â  Â  Â  justify-content: center;
Â  Â  Â  flex-wrap: nowrap;
Â  Â  }

Â  Â  .back-btn {
Â  Â  Â  width: 28px;
Â  Â  Â  height: 28px;
Â  Â  Â  padding: 0;
Â  Â  Â  border-radius: 6px;
Â  Â  Â  font-size: 16px;
Â  Â  Â  background: #444;
Â  Â  Â  color: #fff;
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  justify-content: center;
Â  Â  Â  flex-shrink: 0;
Â  Â  Â  margin-right: 8px;
Â  Â  Â  margin-top: 0;
Â  Â  Â  margin-bottom: 0;
Â  Â  }

Â  Â  .search-input {
Â  Â  Â  flex: 1;
Â  Â  Â  max-width: 260px;
Â  Â  Â  min-width: 0;
Â  Â  Â  padding: 8px 10px;
Â  Â  Â  border-radius: 6px;
Â  Â  Â  border: none;
Â  Â  }

Â  Â  .filter-anchor {
Â  Â  Â  position: relative;
Â  Â  Â  display: inline-block;
Â  Â  }

Â  Â  .filter-btn {
Â  Â  Â  width: 32px;
Â  Â  Â  height: 32px;
Â  Â  Â  border-radius: 6px;
Â  Â  Â  font-size: 20px;
Â  Â  Â  background: #444;
Â  Â  Â  color: #fff;
Â  Â  Â  padding: 0;
Â  Â  Â  margin: 0;
Â  Â  }

Â  Â  .filter-menu {
Â  Â  Â  position: absolute;
Â  Â  Â  top: 50%;
Â  Â  Â  left: calc(100% + 8px);
Â  Â  Â  transform: translateY(-50%);
Â  Â  Â  background: var(--panel);
Â  Â  Â  padding: 10px;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  gap: 8px;
Â  Â  Â  z-index: 999;
Â  Â  Â  min-width: 160px;
Â  Â  }

Â  Â  /* ========== GAME SCREEN ========== */
Â  Â  .topbar {
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  justify-content: space-between;
Â  Â  Â  gap: 12px;
Â  Â  Â  margin-bottom: 8px;
Â  Â  }

Â  Â  .game {
Â  Â  Â  background: var(--panel);
Â  Â  Â  border-radius: 12px;
Â  Â  Â  padding: 12px;
Â  Â  }

Â  Â  .game-view {
Â  Â  Â  position: relative;
Â  Â  Â  width: 100%;
Â  Â  Â  aspect-ratio: 3 / 2;
Â  Â  Â  max-height: 66vh;
Â  Â  Â  border-radius: 10px;
Â  Â  Â  margin-bottom: 8px;
Â  Â  Â  background-color: #111;
Â  Â  Â  display: block;
Â  Â  Â  padding: 0;
Â  Â  Â  overflow: hidden;
Â  Â  }

Â  Â  .game-view img#sceneImage,
Â  Â  .game-view svg#sceneImage {
Â  Â  Â  position: absolute;
Â  Â  Â  inset: 0;
Â  Â  Â  width: 100%;
Â  Â  Â  height: 100%;
Â  Â  Â  object-fit: contain;
Â  Â  Â  object-position: center 30%;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  z-index: 1;
Â  Â  }

Â  Â  /* ========== HOTSPOTS ========== */
Â  Â  .hotspot {
Â  Â  Â  position: absolute;
Â  Â  Â  background: transparent !important;
Â  Â  Â  border: none !important;
Â  Â  Â  cursor: pointer;
Â  Â  Â  z-index: 50;
Â  Â  Â  pointer-events: auto;
Â  Â  Â  transition: none;
Â  Â  }

Â  Â  /* remove any accidental outlines */
Â  Â  .hotspot.show-outline,
Â  Â  .hotspot.editing {
Â  Â  Â  border: none !important;
Â  Â  Â  background: transparent !important;
Â  Â  }

Â  Â  /* Mystery Mansion Hotspots */
Â  Â  .room-mystery .hotspot.painting {
Â  Â  Â  left: 44.1667%;
Â  Â  Â  top: 6%;
Â  Â  Â  width: 13%;
Â  Â  Â  height: 25%;
Â  Â  }

Â  Â  .room-mystery .hotspot.fireplace {
Â  Â  Â  left: 40%;
Â  Â  Â  top: 33.75%;
Â  Â  Â  width: 20%;
Â  Â  Â  height: 27.5%;
Â  Â  }

Â  Â  .room-mystery .hotspot.door {
Â  Â  Â  left: 73%;
Â  Â  Â  top: 25%;
Â  Â  Â  width: 10%;
Â  Â  Â  height: 35%;
Â  Â  Â  z-index: 60;
Â  Â  }

Â  Â  .room-mystery .hotspot.safe {
Â  Â  Â  left: 73%;
Â  Â  Â  top: 70%;
Â  Â  Â  width: 5%;
Â  Â  Â  height: 10%;
Â  Â  Â  z-index: 60;
Â  Â  }

Â  Â  .room-mystery .hotspot.rug {
Â  Â  Â  left: 36.6667%;
Â  Â  Â  top: 70%;
Â  Â  Â  width: 26.6667%;
Â  Â  Â  height: 15%;
Â  Â  }

Â  Â  .room-mystery .hotspot.books {
Â  Â  Â  left: 20%;
Â  Â  Â  top: 53%;
Â  Â  Â  width: 6.6667%;
Â  Â  Â  height: 15%;
Â  Â  }

/* Magical Library Hotspots */
.room-library .hotspot.crystal {
Â  left: 40%;
Â  top: 35%;
Â  width: 6%;
Â  height: 5%;
}

.room-library .hotspot.bookshelf {
Â  left: 8%;
Â  top: 5%;
Â  width: 5%;
Â  height: 5%;
}

.room-library .hotspot.candles {
Â  left: 48%;
Â  top: 28%;
Â  width: 8%;
Â  height: 13%;
}

.room-library .hotspot.scroll {
Â  left: 18%;
Â  top: 83%;
Â  width: 5%;
Â  height: 5%;
}

.room-library .hotspot.chest {
Â  left: 46%;
Â  top: 15%;
Â  width: 12%;
Â  height: 12%;
}

.room-library .hotspot.door {
Â  left: 63%;
Â  top: 8%;
Â  width: 18%;
Â  height: 45%;
Â  z-index: 60;
}

/* Pirate Cove Hotspots */
.room-pirate .hotspot.map {
Â  left: 4%;
Â  top: 48%;
Â  width: 8%;
Â  height: 10%;
}

.room-pirate .hotspot.barrel {
Â  left: 25%;
Â  top: 58%;
Â  width: 3%;
Â  height: 10%;
}

.room-pirate .hotspot.crates {
Â  left: 15%;
Â  top: 68%;
Â  width: 10%;
Â  height: 12%;
}

.room-pirate .hotspot.campfire {
Â  left: 45%;
Â  top: 55%;
Â  width: 5%;
Â  height: 8%;
}

.room-pirate .hotspot.sand {
Â  left: 70%;
Â  top: 60%;
Â  width: 5%;
Â  height: 5%;
}

.room-pirate .hotspot.door {
Â  left: 63%;
Â  top: 68%;
Â  width: 8%;
Â  height: 8%;
Â  z-index: 60;
}


Â  Â  /* Haunted Asylum Hotspots */
Â  Â  .room-asylum .hotspot.bed {
Â  Â  Â  position: absolute;
Â  Â  Â  left: 54%;
Â  Â  Â  top: 30%;
Â  Â  Â  width: 14%;
Â  Â  Â  height: 32%;
Â  Â  Â  transform: rotate(35deg);
Â  Â  }

Â  Â  .room-asylum .hotspot.tv {
Â  Â  Â  left: 35%;
Â  Â  Â  top: 59%;
Â  Â  Â  width: 12%;
Â  Â  Â  height: 18%;
Â  Â  }

Â  Â  .room-asylum .hotspot.paper {
Â  Â  Â  left: 36%;
Â  Â  Â  top: 53%;
Â  Â  Â  width: 5%;
Â  Â  Â  height: 4%;
Â  Â  }

Â  Â  .room-asylum .hotspot.firstaid {
Â  Â  Â  left: 28%;
Â  Â  Â  top: 5%;
Â  Â  Â  width: 8%;
Â  Â  Â  height: 30%;
Â  Â  }

Â  Â  .room-asylum .hotspot.pipe {
Â  Â  Â  left: 8%;
Â  Â  Â  top: 5%;
Â  Â  Â  width: 6%;
Â  Â  Â  height: 20%;
Â  Â  }

Â  Â  .room-asylum .hotspot.door {
Â  Â  Â  left: 83%;
Â  Â  Â  top: 8%;
Â  Â  Â  width: 15%;
Â  Â  Â  height: 50%;
Â  Â  Â  z-index: 60;
Â  Â  }

Â  Â  .hotspot.show-outline {
Â  Â  Â  border: 2px solid rgba(255, 0, 0, 0.6);
Â  Â  Â  background: rgba(255, 0, 0, 0.06);
Â  Â  }

Â  Â  .hotspot.editing {
Â  Â  Â  outline: 3px dashed rgba(255, 0, 0, 0.9);
Â  Â  }

Â  Â  /* ========== INVENTORY ========== */
Â  Â  .inventory {
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  gap: 12px;
Â  Â  Â  padding: 8px;
Â  Â  Â  background: rgba(0, 0, 0, 0.14);
Â  Â  Â  border-radius: 8px;
Â  Â  Â  margin-top: 8px;
Â  Â  }

Â  Â  .inv-label {
Â  Â  Â  font-size: 0.85rem;
Â  Â  Â  color: #ddd;
Â  Â  Â  margin-right: 8px;
Â  Â  }

Â  Â  .inv-items {
Â  Â  Â  display: flex;
Â  Â  Â  gap: 8px;
Â  Â  Â  flex-wrap: wrap;
Â  Â  }

Â  Â  .inv-item {
Â  Â  Â  width: 36px;
Â  Â  Â  height: 36px;
Â  Â  Â  border-radius: 6px;
Â  Â  Â  background: #fff;
Â  Â  Â  color: #111;
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  justify-content: center;
Â  Â  Â  font-size: 18px;
Â  Â  Â  cursor: pointer;
Â  Â  }

Â  Â  .inv-item.selected {
Â  Â  Â  outline: 3px solid rgba(201, 162, 39, 0.9);
Â  Â  }

Â  Â  .clue-badge {
Â  Â  Â  width: 48px;
Â  Â  Â  height: 48px;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  background: #fef6e3;
Â  Â  Â  color: #111;
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  justify-content: center;
Â  Â  Â  font-size: 20px;
Â  Â  Â  font-weight: 700;
Â  Â  Â  border: 1px solid rgba(201, 162, 39, 0.25);
Â  Â  }

Â  Â  /* ========== DOOR KEYPAD ========== */
Â  Â  #codeDisplay {
Â  Â  Â  font-family: monospace, monospace;
Â  Â  Â  text-align: center;
Â  Â  Â  padding: 8px 10px;
Â  Â  Â  background: #fff;
Â  Â  Â  color: #111;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  display: inline-block;
Â  Â  Â  min-width: 124px;
Â  Â  Â  font-weight: 700;
Â  Â  Â  margin: 8px 0;
Â  Â  Â  letter-spacing: 14px;
Â  Â  Â  font-size: 26px;
Â  Â  }

Â  Â  #digitButtons {
Â  Â  Â  display: flex;
Â  Â  Â  gap: 8px;
Â  Â  Â  flex-wrap: wrap;
Â  Â  Â  justify-content: center;
Â  Â  Â  max-width: 320px;
Â  Â  Â  margin: 6px auto 12px;
Â  Â  }

Â  Â  #digitButtons .digit {
Â  Â  Â  width: 44px;
Â  Â  Â  min-width: 44px;
Â  Â  Â  height: 44px;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  background: #fff;
Â  Â  Â  border: 1px solid #ddd;
Â  Â  Â  font-size: 16px;
Â  Â  Â  cursor: pointer;
Â  Â  Â  display: inline-flex;
Â  Â  Â  align-items: center;
Â  Â  Â  justify-content: center;
Â  Â  Â  padding: 0;
Â  Â  Â  box-sizing: border-box;
Â  Â  Â  margin: 0;
Â  Â  }

Â  Â  #digitButtons .digit.digit-found {
Â  Â  Â  background: #fff;
Â  Â  Â  color: #111;
Â  Â  Â  font-weight: 600;
Â  Â  Â  border: 1px solid #ddd;
Â  Â  }

Â  Â  #digitButtons .digit.digit-disabled {
Â  Â  Â  opacity: 0.28;
Â  Â  Â  cursor: not-allowed;
Â  Â  Â  transform: scale(0.95);
Â  Â  }

Â  Â  /* ========== MODALS & OVERLAYS ========== */
Â  Â  .menu-overlay {
Â  Â  Â  position: fixed;
Â  Â  Â  inset: 0;
Â  Â  Â  background: rgba(0, 0, 0, 0.8);
Â  Â  Â  display: none;
Â  Â  Â  align-items: center;
Â  Â  Â  justify-content: center;
Â  Â  Â  z-index: 2000;
Â  Â  Â  pointer-events: auto;
Â  Â  }

Â  Â  .menu {
Â  Â  Â  background: var(--panel);
Â  Â  Â  border-radius: 12px;
Â  Â  Â  padding: 16px;
Â  Â  Â  width: 280px;
Â  Â  Â  pointer-events: auto;
Â  Â  }

Â  Â  .modal {
Â  Â  Â  position: fixed;
Â  Â  Â  inset: 0;
Â  Â  Â  background: rgba(0, 0, 0, 0.6);
Â  Â  Â  display: none;
Â  Â  Â  align-items: center;
Â  Â  Â  justify-content: center;
Â  Â  Â  z-index: 1500;
Â  Â  Â  pointer-events: auto;
Â  Â  }

Â  Â  .modal-content {
Â  Â  Â  background: var(--panel);
Â  Â  Â  padding: 16px;
Â  Â  Â  border-radius: 10px;
Â  Â  Â  max-width: 320px;
Â  Â  Â  position: relative;
Â  Â  Â  pointer-events: auto;
Â  Â  }

Â  Â  .modal-content button {
Â  Â  Â  width: auto;
Â  Â  Â  padding: 8px 12px;
Â  Â  }

Â  Â  /* ========== GAME PAUSE LOCK ========== */
Â  Â  #game.paused .game-view,
Â  Â  #game.paused .inventory {
Â  Â  Â  pointer-events: none;
Â  Â  Â  opacity: 0.7;
Â  Â  }

Â  Â  #game.paused .topbar {
Â  Â  Â  pointer-events: auto;
Â  Â  }
Â  Â Â 
Â  Â  #game.paused .topbar button {
Â  Â  Â  pointer-events: auto;
Â  Â  }

Â  Â  /* ========== UTILITY CLASSES ========== */
Â  Â  .hidden {
Â  Â  Â  display: none !important;
Â  Â  }

Â  Â  /* ========== RESPONSIVE ========== */
Â  Â  @media (max-width: 480px) {
Â  Â  Â  .game-view {
Â  Â  Â  Â  aspect-ratio: 3 / 2;
Â  Â  Â  Â  max-height: 40vh;
Â  Â  Â  }
Â  Â  }

Â  Â  /* ========== RESPONSIVE UPGRADE ========== */

/* Base fluid scaling */
html {
Â  font-size: clamp(14px, 1.5vw, 16px);
}

/* App container adapts */
.app {
Â  padding: clamp(10px, 2vw, 16px);
}

/* Buttons scale better */
button {
Â  font-size: clamp(0.85rem, 1.5vw, 1rem);
}

/* Game view scales safely */
.game-view {
Â  width: 100%;
Â  max-height: 70vh;
}

/* Inventory adapts */
.inventory {
Â  flex-wrap: wrap;
}

.inv-item,
.clue-badge {
Â  width: clamp(32px, 8vw, 48px);
Â  height: clamp(32px, 8vw, 48px);
Â  font-size: clamp(14px, 3vw, 20px);
}

/* Room title + timer scale */
#roomTitle {
Â  font-size: clamp(0.9rem, 2.2vw, 1.1rem);
}

#timer {
Â  font-size: clamp(0.8rem, 2vw, 1rem);
}

/* ========================= */
/* ğŸ“± SMALL PHONES */
@media (max-width: 480px) {
Â  .topbar {
Â  Â  gap: 6px;
Â  }

Â  .rooms-search {
Â  Â  flex-wrap: wrap;
Â  Â  justify-content: center;
Â  }

Â  .search-input {
Â  Â  max-width: 100%;
Â  }

Â  .filter-menu {
Â  Â  left: 0;
Â  Â  top: calc(100% + 8px);
Â  Â  transform: none;
Â  }

Â  .game-view {
Â  Â  max-height: 42vh;
Â  }

Â  .inventory {
Â  Â  gap: 6px;
Â  }
}

/* ========================= */
/* ğŸ“² TABLETS */
@media (min-width: 481px) and (max-width: 900px) {
Â  .game-view {
Â  Â  max-height: 55vh;
Â  }

Â  .search-input {
Â  Â  max-width: 320px;
Â  }
}

/* ========================= */
/* ğŸ–¥ LARGE DESKTOPS */
@media (min-width: 1200px) {
Â  .app {
Â  Â  max-width: 1200px;
Â  }

Â  .game-view {
Â  Â  max-height: 75vh;
Â  }
}

Â  </style>
</head>
<body>
<div class="app">

Â  <!-- ========== MAIN MENU ========== -->
Â  <section id="main" class="screen active">
Â  Â  <h1 id="mainTitle">ğŸ”‘ Escapeâ€¦ if you can!</h1>
Â  Â  <button onclick="resumeGame()" id="btnCurrentRoom">â–¶ Current Room</button>
Â  Â  <button onclick="showScreen('rooms')" id="btnBrowseRooms">ğŸŒ Browse Rooms</button>
Â  Â  <button onclick="showScreen('settings')" id="btnSettings">âš™ Settings</button>
Â  </section>

Â  <!-- ========== ROOMS BROWSER ========== -->
Â  <section id="rooms" class="screen">
Â  Â  <div class="topbar rooms-topbar">
Â  Â  Â  <div class="rooms-header">
Â  Â  Â  Â  <h2 id="roomsTitle">Escape Rooms</h2>
Â  Â  Â  </div>

Â  Â  Â  <div class="rooms-search">
Â  Â  Â  Â  <button class="back-btn" onclick="showScreen('main')">â†</button>

Â  Â  Â  Â  <input
Â  Â  Â  Â  Â  id="search"
Â  Â  Â  Â  Â  class="search-input"
Â  Â  Â  Â  Â  placeholder="Search rooms"
Â  Â  Â  Â  Â  oninput="renderRooms()"
Â  Â  Â  Â  />

Â  Â  Â  Â  <div class="filter-anchor">
Â  Â  Â  Â  Â  <button class="filter-btn" onclick="toggleFilterMenu()">â‹¯</button>

Â  Â  Â  Â  Â  <div id="filterMenu" class="filter-menu hidden">
Â  Â  Â  Â  Â  Â  <select id="difficulty" onchange="renderRooms()">
Â  Â  Â  Â  Â  Â  Â  <option value="" id="optDifficulty">Difficulty</option>
Â  Â  Â  Â  Â  Â  Â  <option id="optEasy">Easy</option>
Â  Â  Â  Â  Â  Â  Â  <option id="optMedium">Medium</option>
Â  Â  Â  Â  Â  Â  Â  <option id="optHard">Hard</option>
Â  Â  Â  Â  Â  Â  </select>

Â  Â  Â  Â  Â  Â  <select id="status" onchange="renderRooms()">
Â  Â  Â  Â  Â  Â  Â  <option value="" id="optStatus">Status</option>
Â  Â  Â  Â  Â  Â  Â  <option value="new" id="optNew">Not Played</option>
Â  Â  Â  Â  Â  Â  Â  <option value="progress" id="optProgress">In Progress</option>
Â  Â  Â  Â  Â  Â  Â  <option value="done" id="optDone">Completed</option>
Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div id="roomGrid" class="grid" style="margin-top:12px"></div>
Â  </section>

Â  <!-- ========== GAME ========== -->
Â  <section id="game" class="screen">
Â  Â  <div class="topbar">
Â  Â  Â  <button class="secondary" onclick="pauseGame()" style="width:44px;height:44px;padding:0;font-size:20px;margin:0;">â˜°</button>
Â  Â  Â  <strong id="roomTitle">Mystery Mansion â€” Foyer</strong>
Â  Â  Â  <span id="timer">05:00</span>
Â  Â  </div>

Â  Â  <div class="game">
Â  Â  Â  <div class="game-view room-mystery" id="gameView">
Â  Â  Â  Â  <img id="sceneImage" src="foyer.jpg" alt="Foyer" />

Â  Â  Â  Â  <!-- Mystery Mansion Hotspots -->
Â  Â  Â  Â  <div id="hotspotsMysterv" class="hotspots-container">
Â  Â  Â  Â  Â  <button class="hotspot books" title="Inspect books" onclick="interact('spot1')"></button>
Â  Â  Â  Â  Â  <button class="hotspot painting" title="Inspect painting" onclick="interact('spot2')"></button>
Â  Â  Â  Â  Â  <button class="hotspot fireplace" title="Inspect fireplace" onclick="interact('spot3')"></button>
Â  Â  Â  Â  Â  <button class="hotspot rug" title="Lift rug" onclick="interact('spot4')"></button>
Â  Â  Â  Â  Â  <button class="hotspot safe" title="Inspect safe" onclick="interact('spot5')"></button>
Â  Â  Â  Â  Â  <button class="hotspot door" title="Try door" onclick="tryDoor()"></button>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <!-- Magical Library Hotspots -->
Â  Â  Â  Â  <div id="hotspotsLibrary" class="hotspots-container hidden">
Â  Â  Â  Â  Â  <button class="hotspot crystal" title="Inspect crystal ball" onclick="interact('spot1')"></button>
Â  Â  Â  Â  Â  <button class="hotspot bookshelf" title="Search bookshelf" onclick="interact('spot2')"></button>
Â  Â  Â  Â  Â  <button class="hotspot candles" title="Examine candles" onclick="interact('spot3')"></button>
Â  Â  Â  Â  Â  <button class="hotspot scroll" title="Read scroll" onclick="interact('spot4')"></button>
Â  Â  Â  Â  Â  <button class="hotspot chest" title="Open chest" onclick="interact('spot5')"></button>
Â  Â  Â  Â  Â  <button class="hotspot door" title="Push bookshelf" onclick="tryDoor()"></button>
Â  Â  Â  Â  </div>

<!-- Pirate Cove Hotspots -->
<div id="hotspotsPirate" class="hotspots-container hidden">
Â  <button class="hotspot map" title="Search through papers" onclick="interact('spot1')"></button>
Â  <button class="hotspot barrel" title="Search barrel" onclick="interact('spot2')"></button>
Â  <button class="hotspot crates" title="Check crates" onclick="interact('spot3')"></button>
Â  <button class="hotspot campfire" title="Search around campfire" onclick="interact('spot4')"></button>
Â  <button class="hotspot sand" title="Check driftwood" onclick="interact('spot5')"></button>
Â  <button class="hotspot door" title="Dig for buried treasure" onclick="interact('spot6')"></button>
</div>

Â  Â  Â  Â  <!-- Haunted Asylum Hotspots -->
Â  Â  Â  Â  <div id="hotspotsAsylum" class="hotspots-container hidden">
Â  Â  Â  Â  Â  <button class="hotspot bed" title="Search bed" onclick="interact('spot1')"></button>
Â  Â  Â  Â  Â  <button class="hotspot tv" title="Examine TV" onclick="interact('spot2')"></button>
Â  Â  Â  Â  Â  <button class="hotspot paper" title="Read paper on TV" onclick="interact('spot3')"></button>
Â  Â  Â  Â  Â  <button class="hotspot firstaid" title="Open first-aid box" onclick="interact('spot4')"></button>
Â  Â  Â  Â  Â  <button class="hotspot pipe" title="Inspect pipe" onclick="interact('spot5')"></button>
Â  Â  Â  Â  Â  <button class="hotspot door" title="Try door" onclick="tryDoor()"></button>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>

Â  Â  Â  <div class="inventory" id="inventory">
Â  Â  Â  Â  <div class="inv-label" id="invLabel">Inventory</div>
Â  Â  Â  Â  <div class="inv-items" id="invItems"></div>
Â  Â  Â  </div>
Â  Â  </div>
Â  </section>

Â  <!-- ========== VICTORY ========== -->
Â  <section id="victory" class="screen">
Â  Â  <h1 id="victoryTitle">ğŸ‰ You Escaped!</h1>
Â  Â  <p id="victoryText">You successfully completed the room!</p>
Â  Â  <button onclick="showScreen('rooms')" id="btnBackToRooms">Back to Rooms</button>
Â  Â  <button onclick="showScreen('main')" id="btnMainMenu">Main Menu</button>
Â  </section>

Â  <!-- ========== SETTINGS ========== -->
Â  <section id="settings" class="screen">
Â  Â  <h2 id="settingsTitle">Settings</h2>
Â  Â  <button onclick="toggleAudio()"><span id="btnAudioIcon">ğŸ”Š</span> <span id="btnAudioText">Audio</span>: <span id="audioStatus">On</span></button>
Â  Â  <button onclick="changeLanguage()">ğŸŒ <span id="btnLanguageText">Language</span>: <span id="langStatus">English</span></button>
Â  Â  <button onclick="showControls()"><span id="btnControlsIcon">ğŸ®</span> <span id="btnControlsText">Controls</span></button>
Â  Â  <button onclick="showHowToPlay()"><span id="btnHelpIcon">â“</span> <span id="btnHelpText">How to Play</span></button>
Â  Â  <button onclick="showScreen('main')" id="btnClose">Close</button>
Â  </section>
</div>

<!-- ========== PAUSE MENU OVERLAY ========== -->
<div id="menuOverlay" class="menu-overlay">
Â  <div class="menu">
Â  Â  <h3 id="pauseTitle">Paused</h3>
Â  Â  <button onclick="resumeGame()" id="btnResume">Resume</button>
Â  Â  <button onclick="showScreen('settings'); closeMenu()" id="btnPauseSettings">Settings</button>
Â  Â  <button onclick="showScreen('main'); closeMenu()" id="btnQuit">Quit</button>
Â  </div>
</div>

<!-- ========== DOOR KEYPAD MODAL ========== -->
<div id="doorModal" class="modal hidden">
Â  <div class="modal-content">
Â  Â  <h3 id="doorModalTitle">Door Keypad</h3>
Â  Â  <p id="doorModalText">Enter the code by clicking the digits you have found</p>
Â  Â  <div id="codeDisplay">_ _ _</div>
Â  Â  <div id="digitButtons"></div>
Â  Â  <div style="display:flex;gap:8px;justify-content:center">
Â  Â  Â  <button onclick="submitDoorCode()" id="btnSubmit">Submit</button>
Â  Â  Â  <button onclick="clearDoorCode()" id="btnClear">Clear</button>
Â  Â  Â  <button onclick="closeDoorModal()" id="btnCloseDoor">Close</button>
Â  Â  </div>
Â  </div>
</div>

<!-- ========== MESSAGE MODAL ========== -->
<div id="modal" class="modal">
Â  <div class="modal-content">
Â  Â  <p id="modalText"></p>
Â  Â  <button onclick="closeModal()" id="btnOK">OK</button>
Â  </div>
</div>

<!-- Menu / Lobby Music -->
<audio id="menuMusic" loop>
Â  <source src="mixkit-xanthos-633.mp3" type="audio/mpeg">
</audio>

<!-- In-Room Music -->
<audio id="roomMusic" loop>
Â  <source src="halloween-spooky-eerie-music-416618.mp3" type="audio/mpeg">
</audio>


Â  <div id="doorModal" class="modal-overlay" style="display: none;">
Â  Â  <div class="modal-content">
Â  Â  Â  <h2 id="doorModalTitle">Door Keypad</h2>
Â  Â  Â  <p id="doorModalText">Enter the code by clicking the digits you have found:</p>
Â  Â  Â Â 
Â  Â  Â  <div id="codeDisplay" style="font-size: 2rem; background: #000; padding: 10px; margin: 15px 0; letter-spacing: 5px; border: 2px solid var(--accent); color: var(--accent); text-align: center;">
Â  Â  Â  Â  _ _ _
Â  Â  Â  </div>

Â  Â  Â  <div id="digitButtons" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 20px;">
Â  Â  Â  Â  </div>

Â  Â  Â  <div style="display: flex; gap: 10px;">
Â  Â  Â  Â  <button onclick="submitDoorCode()" style="background: green; color: white; flex: 1;" id="btnSubmit">Submit</button>
Â  Â  Â  Â  <button onclick="clearDoorCode()" style="background: #444; color: white; flex: 1;" id="btnClear">Clear</button>
Â  Â  Â  </div>
Â  Â  Â  <button onclick="closeDoorModal()" style="margin-top: 10px; background: transparent; border: 1px solid #777;" id="btnCloseDoor">Close</button>
Â  Â  </div>
Â  </div>
Â Â 
<script>

// ========== LANGUAGE SYSTEM ==========
Â  let currentLanguage = 'en';
Â Â 
Â  const translations = {
Â  Â  en: {
Â  Â  Â  mainTitle: 'ğŸ”‘ Escapeâ€¦ if you can!',
Â  Â  Â  btnCurrentRoom: 'â–¶ Current Room',
Â  Â  Â  btnBrowseRooms: 'ğŸŒ Browse Rooms',
Â  Â  Â  btnSettings: 'âš™ Settings',
Â  Â  Â  roomsTitle: 'Escape Rooms',
Â  Â  Â  searchPlaceholder: 'Search rooms',
Â  Â  Â  optDifficulty: 'Difficulty',
Â  Â  Â  optEasy: 'Easy',
Â  Â  Â  optMedium: 'Medium',
Â  Â  Â  optHard: 'Hard',
Â  Â  Â  optStatus: 'Status',
Â  Â  Â  optNew: 'Not Played',
Â  Â  Â  optProgress: 'In Progress',
Â  Â  Â  optDone: 'Completed',
Â  Â  Â  btnEnter: 'Enter',
Â  Â  Â  victoryTitle: 'ğŸ‰ You Escaped!',
Â  Â  Â  victoryText: 'You successfully completed the room!',
Â  Â  Â  btnBackToRooms: 'Back to Rooms',
Â  Â  Â  btnMainMenu: 'Main Menu',
Â  Â  Â  settingsTitle: 'Settings',
Â  Â  Â  btnAudioText: 'Audio',
Â  Â  Â  btnLanguageText: 'Language',
Â  Â  Â  btnControlsText: 'Controls',
Â  Â  Â  btnHelpText: 'How to Play',
Â  Â  Â  btnClose: 'Close',
Â  Â  Â  audioOn: 'On',
Â  Â  Â  audioOff: 'Off',
Â  Â  Â  langEnglish: 'English',
Â  Â  Â  langSpanish: 'Spanish',
Â  Â  Â  pauseTitle: 'Paused',
Â  Â  Â  btnResume: 'Resume',
Â  Â  Â  btnPauseSettings: 'Settings',
Â  Â  Â  btnQuit: 'Quit',
Â  Â  Â  doorModalTitle: 'Door Keypad',
Â  Â  Â  doorModalText: 'Enter the code by clicking the digits you have found',
Â  Â  Â  btnSubmit: 'Submit',
Â  Â  Â  btnClear: 'Clear',
Â  Â  Â  btnCloseDoor: 'Close',
Â  Â  Â  btnOK: 'OK',
Â  Â  Â  invLabel: 'Inventory',
Â  Â  Â  roomMysteryMansion: 'Mystery Mansion',
Â  Â  Â  roomMagicalLibrary: 'Magical Library',
Â  Â  Â  roomPirateCove: 'Pirate Cove',
Â  Â  Â  roomHauntedAsylum: 'Haunted Asylum',
Â  Â  Â  msgAlreadyFound: 'You already found this clue.',
Â  Â  Â  msgNothingElse: 'Nothing else remains here.',
Â  Â  Â  msgItemFound: 'You found a useful item!',
Â  Â  Â  msgNeedNumbers: 'You need to find some numbers first!',
Â  Â  Â  msgDoorUnlocked: 'The door is already unlocked.',
Â  Â  Â  msgIncorrectCode: 'Incorrect code. Keep looking for clues!',
Â  Â  Â  msgCodeIs3Digits: 'Code is 3 digits. Clear to re-enter.',
Â  Â  Â  msgControls: 'Click on hotspots to interact with them. Find clues hidden around the room to unlock the door.',
Â  Â  Â  msgHowToPlay: 'Find three number clues hidden around the room. Use them to unlock the door keypad and escape!',
Â  Â  Â  msgHotspotSaved: 'Hotspot positions saved.',
Â  Â  Â  msgSelectHotspot: 'Select a hotspot first'
Â  Â  },
Â  Â  es: {
Â  Â  Â  mainTitle: 'ğŸ”‘ Â¡Escapaâ€¦ si puedes!',
Â  Â  Â  btnCurrentRoom: 'â–¶ Sala Actual',
Â  Â  Â  btnBrowseRooms: 'ğŸŒ Explorar Salas',
Â  Â  Â  btnSettings: 'âš™ ConfiguraciÃ³n',
Â  Â  Â  roomsTitle: 'Salas de Escape',
Â  Â  Â  searchPlaceholder: 'Buscar salas',
Â  Â  Â  optDifficulty: 'Dificultad',
Â  Â  Â  optEasy: 'FÃ¡cil',
Â  Â  Â  optMedium: 'Medio',
Â  Â  Â  optHard: 'DifÃ­cil',
Â  Â  Â  optStatus: 'Estado',
Â  Â  Â  optNew: 'No Jugado',
Â  Â  Â  optProgress: 'En Progreso',
Â  Â  Â  optDone: 'Completado',
Â  Â  Â  btnEnter: 'Entrar',
Â  Â  Â  victoryTitle: 'ğŸ‰ Â¡Has Escapado!',
Â  Â  Â  victoryText: 'Â¡Has completado la sala exitosamente!',
Â  Â  Â  btnBackToRooms: 'Volver a Salas',
Â  Â  Â  btnMainMenu: 'MenÃº Principal',
Â  Â  Â  settingsTitle: 'ConfiguraciÃ³n',
Â  Â  Â  btnAudioText: 'Audio',
Â  Â  Â  btnLanguageText: 'Idioma',
Â  Â  Â  btnControlsText: 'Controles',
Â  Â  Â  btnHelpText: 'CÃ³mo Jugar',
Â  Â  Â  btnClose: 'Cerrar',
Â  Â  Â  audioOn: 'Activado',
Â  Â  Â  audioOff: 'Desactivado',
Â  Â  Â  langEnglish: 'InglÃ©s',
Â  Â  Â  langSpanish: 'EspaÃ±ol',
Â  Â  Â  pauseTitle: 'Pausado',
Â  Â  Â  btnResume: 'Reanudar',
Â  Â  Â  btnPauseSettings: 'ConfiguraciÃ³n',
Â  Â  Â  btnQuit: 'Salir',
Â  Â  Â  doorModalTitle: 'Teclado de Puerta',
Â  Â  Â  doorModalText: 'Ingresa el cÃ³digo haciendo clic en los dÃ­gitos que encontraste',
Â  Â  Â  btnSubmit: 'Enviar',
Â  Â  Â  btnClear: 'Borrar',
Â  Â  Â  btnCloseDoor: 'Cerrar',
Â  Â  Â  btnOK: 'OK',
Â  Â  Â  invLabel: 'Inventario',
Â  Â  Â  roomMysteryMansion: 'MansiÃ³n Misteriosa',
Â  Â  Â  roomMagicalLibrary: 'Biblioteca MÃ¡gica',
Â  Â  Â  roomPirateCove: 'Cala de Piratas',
Â  Â  Â  roomHauntedAsylum: 'Asilo Embrujado',
Â  Â  Â  msgAlreadyFound: 'Ya encontraste esta pista.',
Â  Â  Â  msgNothingElse: 'No queda nada mÃ¡s aquÃ­.',
Â  Â  Â  msgItemFound: 'Â¡Encontraste un objeto Ãºtil!',
Â  Â  Â  msgNeedNumbers: 'Â¡Necesitas encontrar algunos nÃºmeros primero!',
Â  Â  Â  msgDoorUnlocked: 'La puerta ya estÃ¡ desbloqueada.',
Â  Â  Â  msgIncorrectCode: 'Â¡CÃ³digo incorrecto! Sigue buscando pistas.',
Â  Â  Â  msgCodeIs3Digits: 'El cÃ³digo tiene 3 dÃ­gitos. Borra para volver a ingresar.',
Â  Â  Â  msgControls: 'Haz clic en los puntos de interÃ©s para interactuar con ellos.',
Â  Â  Â  msgHowToPlay: 'Â¡Encuentra tres pistas numÃ©ricas escondidas en la sala. Ãšsalas para desbloquear el teclado!',
Â  Â  Â  msgHotspotSaved: 'Posiciones de puntos guardadas.',
Â  Â  Â  msgSelectHotspot: 'Selecciona un punto primero'
Â  Â  }
Â  };

Â  function updateLanguage() {
Â  Â  const lang = translations[currentLanguage];
Â  Â  document.getElementById('mainTitle').textContent = lang.mainTitle;
Â  Â  document.getElementById('btnCurrentRoom').textContent = lang.btnCurrentRoom;
Â  Â  document.getElementById('btnBrowseRooms').textContent = lang.btnBrowseRooms;
Â  Â  document.getElementById('btnSettings').textContent = lang.btnSettings;
Â  Â  document.getElementById('roomsTitle').textContent = lang.roomsTitle;
Â  Â  document.getElementById('search').placeholder = lang.searchPlaceholder;
Â  Â  document.getElementById('optDifficulty').textContent = lang.optDifficulty;
Â  Â  document.getElementById('optEasy').textContent = lang.optEasy;
Â  Â  document.getElementById('optMedium').textContent = lang.optMedium;
Â  Â  document.getElementById('optHard').textContent = lang.optHard;
Â  Â  document.getElementById('optStatus').textContent = lang.optStatus;
Â  Â  document.getElementById('optNew').textContent = lang.optNew;
Â  Â  document.getElementById('optProgress').textContent = lang.optProgress;
Â  Â  document.getElementById('optDone').textContent = lang.optDone;
Â  Â  document.getElementById('victoryTitle').textContent = lang.victoryTitle;
Â  Â  document.getElementById('victoryText').textContent = lang.victoryText;
Â  Â  document.getElementById('btnBackToRooms').textContent = lang.btnBackToRooms;
Â  Â  document.getElementById('btnMainMenu').textContent = lang.btnMainMenu;
Â  Â  document.getElementById('settingsTitle').textContent = lang.settingsTitle;
Â  Â  document.getElementById('btnAudioText').textContent = lang.btnAudioText;
Â  Â  document.getElementById('btnLanguageText').textContent = lang.btnLanguageText;
Â  Â  document.getElementById('btnControlsText').textContent = lang.btnControlsText;
Â  Â  document.getElementById('btnHelpText').textContent = lang.btnHelpText;
Â  Â  document.getElementById('btnClose').textContent = lang.btnClose;
Â  Â  document.getElementById('pauseTitle').textContent = lang.pauseTitle;
Â  Â  document.getElementById('btnResume').textContent = lang.btnResume;
Â  Â  document.getElementById('btnPauseSettings').textContent = lang.btnPauseSettings;
Â  Â  document.getElementById('btnQuit').textContent = lang.btnQuit;
Â  Â  document.getElementById('doorModalTitle').textContent = lang.doorModalTitle;
Â  Â  document.getElementById('doorModalText').textContent = lang.doorModalText;
Â  Â  document.getElementById('btnSubmit').textContent = lang.btnSubmit;
Â  Â  document.getElementById('btnClear').textContent = lang.btnClear;
Â  Â  document.getElementById('btnCloseDoor').textContent = lang.btnCloseDoor;
Â  Â  document.getElementById('btnOK').textContent = lang.btnOK;
Â  Â  document.getElementById('invLabel').textContent = lang.invLabel;
Â  Â  document.getElementById('langStatus').textContent = currentLanguage === 'en' ? lang.langEnglish : lang.langSpanish;
Â  Â  renderRooms();
Â  Â  const roomData = roomsData[currentRoom];
Â  Â  if (roomData) {
Â  Â  Â  document.getElementById('roomTitle').textContent = currentLanguage === 'en' ? roomData.titleEN : roomData.titleES;
Â  Â  }
Â  }

Â  function changeLanguage() {
Â  Â  currentLanguage = currentLanguage === 'en' ? 'es' : 'en';
Â  Â  updateLanguage();
Â  }

Â  // ========== AUDIO SYSTEM ==========
Â  let audioEnabled = true;
Â  const menuMusic = document.getElementById("menuMusic");
Â  const roomMusic = document.getElementById("roomMusic");

Â  function toggleAudio() {
Â  Â  audioEnabled = !audioEnabled;
Â  Â  const lang = translations[currentLanguage];
Â  Â  document.getElementById('audioStatus').textContent = audioEnabled ? lang.audioOn : lang.audioOff;
Â  Â  if (audioEnabled) playMenuMusic();
Â  Â  else { menuMusic.pause(); roomMusic.pause(); }
Â  }

Â  function playMenuMusic() {
Â  Â  if (!audioEnabled) return;
Â  Â  roomMusic.pause();
Â  Â  roomMusic.currentTime = 0;
Â  Â  menuMusic.volume = 0.25;
Â  Â  if (menuMusic.paused) menuMusic.play().catch(()=>{});
Â  }

Â  function playRoomMusic() {
Â  Â  if (!audioEnabled) return;
Â  Â  menuMusic.pause();
Â  Â  menuMusic.currentTime = 0;
Â  Â  roomMusic.volume = 0.4;
Â  Â  if (roomMusic.paused) roomMusic.play().catch(()=>{});
Â  }

Â  // ========== DATA & STATE ==========
Â  const roomsData = {
Â  Â  'Mystery Mansion': {
Â  Â  Â  titleEN: 'Mystery Mansion â€” Foyer',
Â  Â  Â  titleES: 'MansiÃ³n Misteriosa â€” VestÃ­bulo',
Â  Â  Â  className: 'room-mystery',
Â  Â  Â  hotspotsId: 'hotspotsMysterv',
Â  Â  Â  image: 'images/foyer.jpg',Â 
Â  Â  Â  time: 300,
Â  Â  Â  code: '042',
Â  Â  Â  clues: {
Â  Â  Â  Â  spot1: { number: 2, found: false, messageEN: 'You found a number hidden inside an old book!', messageES: 'Â¡Encontraste un nÃºmero escondido dentro de un libro viejo!' },
Â  Â  Â  Â  spot2: { number: 0, found: false, messageEN: 'Behind the painting, a number is scratched into the wall!', messageES: 'Â¡DetrÃ¡s de la pintura, un nÃºmero estÃ¡ grabado en la pared!' },
Â  Â  Â  Â  spot3: { item: 'ğŸ§©', found: false, messageEN: 'You find a metal code plate! Might be useful for the safe.', messageES: 'Â¡Encuentras una placa de cÃ³digo metÃ¡lica! Ãštil para la caja fuerte.' },
Â  Â  Â  Â  spot4: { number: 4, found: false, messageEN: 'Under the rug, you discover a number carved into the floor!', messageES: 'Â¡Bajo la alfombra, descubres un nÃºmero tallado en el suelo!' },
Â  Â  Â  Â  spot5: { item: 'ğŸ”', found: false, messageEN: 'The safe opens! Inside is a heavy brass key.', messageES: 'Â¡La caja fuerte se abre! Dentro hay una llave de latÃ³n.' }
Â  Â  Â  }
Â  Â  },
Â  Â  'Magical Library': {
Â  Â  Â  titleEN: 'Magical Library â€” Reading Room',
Â  Â  Â  titleES:
